#include <iostream>
using namespace std;

// Base class that asks the user to enter a complex number
class BaseComplex {
protected:
    double real1, imag1; // Real and imaginary parts of the base complex number

public:
    // Constructor to initialize the complex number to 0
    BaseComplex() : real1(0), imag1(0) {}

    // Function to get a complex number from the user
    void inputComplex() {
        cout << "Enter the real part of the base complex: ";
        cin >> real1;
        cout << "Enter the imaginary part of the base complex: ";
        cin >> imag1;
    }

    // Function to display the base complex number in a + bi format
    void displayComplex() const {
        cout << real1 << " + " << imag1 << "i" << endl;
    }

    // Grant friendship to the FriendComplex class
    friend class FriendComplex;
};

// Derived class that adds its own complex number to the base complex number
class DerivedComplex : public BaseComplex {
private:
    double real2, imag2; // Real and imaginary parts of the derived complex number

public:
    // Constructor to initialize the derived complex number to 0
    DerivedComplex() : real2(0), imag2(0) {}

    // Function to get the derived complex number from the user
    void inputDerivedComplex() {
        cout << "Enter the real part of the derived complex: ";
        cin >> real2;
        cout << "Enter the imaginary part of the derived complex: ";
        cin >> imag2;
    }

    // Function to add the derived complex number to the base complex number
    void addComplex() {
        cout << "After addition: ";
        double sumReal = real1 + real2; // Add real parts
        double sumImag = imag1 + imag2; // Add imaginary parts
        cout << sumReal << " + " << sumImag << "i" << endl;
    }

    // Grant friendship to the FriendComplex class
    friend class FriendComplex;
};

// Friend class to the derived class that calculates the difference
class FriendComplex {
public:
    // Function to calculate and display the difference
    void calculateDifference(const BaseComplex &base, const DerivedComplex &derived) {
        double realDiff = base.real1 - derived.real2; // Difference of real parts
        double imagDiff = base.imag1 - derived.imag2; // Difference of imaginary parts
        cout << "Difference between base complex and derived complex: ";
        cout << realDiff << " + " << imagDiff << "i" << endl;
    }
};

int main() {
    // Create objects of the classes
    BaseComplex base;          // Base complex number
    DerivedComplex derived;    // Derived complex number
    FriendComplex friendCalc;  // Friend class to calculate the difference

    // Step 1: Input the base complex number
    base.inputComplex();

    // Step 2: Input the derived complex number
    derived.inputDerivedComplex();

    // Step 3: Add the base and derived complex numbers
    derived.addComplex();

    // Step 4: Calculate and display the difference
    friendCalc.calculateDifference(base, derived);

    return 0;
}
